/*! NewtonSearch - v1.0.0 - 2016-02-01
* Copyright (c) 2016 Newton.ai; Licensed MIT */
if("undefined"==typeof jQuery)throw"(!) jQuery is required";!function(){function t(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function e(t){var e=t.courses,n=t.selector,a=$(n);if(!a.length)throw"(!) Element("+n+") not found";a.addClass("newton-search-holder");var i=$("<div></div>");i.attr("id","jobListingNewton");var o=$("<ul></ul>");o.attr("id","categoryListingNewton");for(var s=0;s<e.length;s++){var r=e[s],l=r.label,c=r.searchBy,d=r.icon;d=$("<img>").attr("src",d);var p=$("<li></li>"),u=$('<div class="newton-image-holder"></div>');u.append(d),p.append(u),p.attr("title",l),p.html(p.html()+l),p.attr("data-query",c),o.append(p)}i.append(o);var g=$("<ul></ul>");g.attr("id","jobByCatListingNewton"),g.addClass("inactive"),g.append("<li>demo</li>"),i.append(g),a.append(i),$("#jobByCatListingNewton").height($("#jobListingNewton").height()),$(a).click(function(t){$(this).addClass("active"),t.stopPropagation()}),$(document).click(function(){$(a).removeClass("active")}),$("#categoryListingNewton>li").click(function(){if($(this).hasClass("active"))$("#categoryListingNewton").removeClass("inactive"),$("#jobByCatListingNewton").addClass("inactive"),$("#categoryListingNewton>li").removeClass("active");else{$("#categoryListingNewton>li").removeClass("active"),$(this).addClass("active"),$("#categoryListingNewton").addClass("inactive"),$("#jobByCatListingNewton").removeClass("inactive"),"undefined"!=typeof newtonSearchRequest&&null!=newtonSearchRequest&&(newtonSearchRequest.abort(),newtonSearchRequest=null);var e=$(this).data("query"),n=t.country,a=t.city,i=1,o={query:e,country_code:n,city:a,page:i,key:"AE"};o=$.param(o),$("#jobByCatListingNewton").empty(),$("#jobByCatListingNewton").append('<div class="newton-search-loading-spinner"></div>'),newtonSearchRequest=$.post("https://newton.ai/newton/getJob?"+o,function(e){if(e=JSON.parse(e),$("#jobByCatListingNewton").empty(),e.results.length)for(var n=0;n<e.results.length;n++){var a=e.results[n],i=a.company,o=a.title,s=a.link;if(i.length&&"Company not disclosed"!=i)var r=i+t.separator+o;else var r=o;var l=$("<li></li>"),c=$("<a></a>");c.attr("href",s),c.attr("target","_blank"),c.html(r),c.attr("title",r),l.append(c),$("#jobByCatListingNewton").append(l)}else console.err("No results found")})}})}this.NewtonJobs=function(){var n={courses:[{label:"Informatic department",searchBy:"developer",icon:"img/computer.png"},{label:"Network department",searchBy:"network",icon:"img/network.png"}],selector:"#newton-search",separator:" hiring ",city:"",country:"us"};arguments[0]&&"object"==typeof arguments[0]?this.options=t(n,arguments[0]):this.options=n,e(this.options)}}();